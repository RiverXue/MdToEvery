# 中国用户访问问题解决方案

## 🔍 问题原因分析

### 为什么中国用户打不开 https://riverxue.github.io/MdToEvery/？

主要原因有以下几点：

#### 1. **GitHub Pages 访问限制**
- GitHub 及其子域名（包括 `github.io`）在中国大陆访问不稳定
- 经常被防火墙（GFW）限制或屏蔽
- 即使能访问，速度也很慢，经常超时

#### 2. **CDN 资源加载问题**
项目使用了以下 CDN 资源（在 `index.html` 中）：
- `cdn.jsdelivr.net` - Marked.js 库
- `cdn.jsdelivr.net` - Docx.js 库  
- `cdn.jsdelivr.net` - FileSaver.js 库

虽然 jsDelivr 在中国访问相对稳定，但如果 GitHub Pages 本身无法访问，这些资源也无法加载。

#### 3. **DNS 解析问题**
- `github.io` 域名的 DNS 解析可能失败
- 部分地区 DNS 污染导致无法正确解析域名

## ✅ 解决方案

### 方案一：本地使用（推荐，最简单）

**优点**：完全不受网络限制，速度最快

**步骤**：
1. 下载整个项目到本地
2. 双击打开 `index.html` 文件
3. 在浏览器中直接使用

**注意**：如果 CDN 资源加载失败，可以：
- 使用代理/VPN 访问一次，让浏览器缓存资源
- 或者使用方案二替换 CDN

---

### 方案二：替换 CDN 为国内镜像

**优点**：部署后国内用户访问速度快

**步骤**：

#### 2.1 替换 jsDelivr CDN 为国内镜像

修改 `index.html` 中的 CDN 链接：

**原链接**（可能访问慢）：
```html
<script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/docx@8.5.0/build/index.js"></script>
<script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
```

**替换为国内镜像**（推荐使用 unpkg 或 bootcdn）：

**选项 A：使用 unpkg.com**（推荐，全球 CDN，国内访问较快）
```html
<script src="https://unpkg.com/marked@11.1.1/marked.min.js"></script>
<script src="https://unpkg.com/docx@8.5.0/build/index.js"></script>
<script src="https://unpkg.com/file-saver@2.0.5/dist/FileSaver.min.js"></script>
```

**选项 B：使用 bootcdn**（国内 CDN，速度快但可能版本不全）
```html
<!-- 需要检查 bootcdn 是否有这些库的最新版本 -->
<script src="https://cdn.bootcdn.net/ajax/libs/marked/11.1.1/marked.min.js"></script>
```

**选项 C：下载到本地**（最稳定，但需要手动更新）
1. 下载所有库文件到本地 `lib/` 目录
2. 修改引用路径为本地路径：
```html
<script src="lib/marked.min.js"></script>
<script src="lib/docx.js"></script>
<script src="lib/FileSaver.min.js"></script>
```

---

### 方案三：部署到国内平台

#### 3.1 部署到 Vercel（最推荐）⭐

**优点**：
- 国内访问速度快（有国内 CDN 节点）
- 自动部署
- 完全免费

**步骤**：
1. 访问：https://vercel.com
2. 使用 GitHub 账号登录
3. 导入项目仓库 `RiverXue/MdToEvery`
4. 点击"Deploy"，等待部署完成
5. 访问地址：`https://md-to-every.vercel.app`（或自动生成的地址）

**注意**：Vercel 会自动部署，每次推送代码到 GitHub 会自动更新。

**详细指南**：请查看 [国内平台部署指南.md](./国内平台部署指南.md)

#### 3.1.1 ⚠️ Gitee Pages 已下线

**重要提示**：Gitee Pages 已于 2024 年 5 月 1 日下线，不再提供服务。请使用 Vercel 或其他替代方案。

#### 3.2 部署到 Netlify（备选）

**优点**：
- 国内访问速度较快
- 自动部署
- 免费

**步骤**：
1. 访问：https://vercel.com
2. 使用 GitHub 账号登录
3. 导入项目仓库
4. 自动部署完成

#### 3.3 部署到 Netlify

**优点**：
- 全球 CDN
- 自动部署
- 免费

**步骤**：
1. 访问：https://www.netlify.com
2. 连接 GitHub 仓库
3. 自动部署

#### 3.4 部署到 Coding Pages（腾讯云）

**优点**：
- 国内访问速度快
- 免费

**步骤**：
1. 访问：https://coding.net
2. 创建项目并启用 Pages 服务
3. 需要手动触发部署

**详细指南**：请查看 [国内平台部署指南.md](./国内平台部署指南.md)

---

### 方案四：使用代理/VPN

**临时解决方案**：
- 使用 VPN 或代理访问 GitHub Pages
- 适合个人使用，不适合分享给其他用户

---

## 🎯 最佳实践建议

### 对于开发者：

1. **同时部署多个平台**：
   - GitHub Pages（国际用户）
   - Vercel（国内用户，推荐）⭐
   - Netlify（备用）
   - 本地使用（离线用户）

2. **使用国内 CDN 镜像**：
   - ✅ 已优化为 unpkg.com CDN（国内访问更快）
   - 或下载库文件到本地

3. **在 README 中说明**：
   - 提供多个访问地址
   - 说明国内用户推荐使用 Vercel
   - ⚠️ 注意：Gitee Pages 已下线

### 对于用户：

1. **优先使用本地版本**：
   - 下载项目到本地
   - 双击 `index.html` 使用

2. **使用 Vercel 部署站点**：
   - 访问 Vercel 部署的地址（国内访问快）

3. **配置代理**：
   - 如果需要访问 GitHub Pages，配置代理

---

## 📝 快速修复脚本

如果需要批量替换 CDN 链接，可以使用以下方法：

### 方法1：手动替换（推荐）

在 `index.html` 中查找并替换：
- `cdn.jsdelivr.net` → `unpkg.com`

### 方法2：使用脚本

创建 `fix-cdn.js` 脚本（Node.js）：
```javascript
const fs = require('fs');
const content = fs.readFileSync('index.html', 'utf8');
const newContent = content.replace(/cdn\.jsdelivr\.net/g, 'unpkg.com');
fs.writeFileSync('index.html', newContent);
console.log('CDN 链接已替换完成！');
```

---

## 🔗 相关资源

- [GitHub Pages 官方文档](https://docs.github.com/en/pages)
- [国内平台部署指南](./国内平台部署指南.md)（包含 Vercel、Netlify、Coding Pages 等）
- [Vercel 部署指南](https://vercel.com/docs)
- [jsDelivr 国内镜像](https://www.jsdelivr.com/)

---

## ❓ 常见问题

### Q: 为什么 GitHub Pages 在中国访问不了？
A: 由于网络政策限制，GitHub 相关服务在中国大陆访问不稳定。

### Q: 替换 CDN 后还是访问不了怎么办？
A: 建议使用方案一（本地使用）或方案三（部署到国内平台）。

### Q: Gitee Pages 还能用吗？
A: ⚠️ **已下线**：Gitee Pages 已于 2024 年 5 月 1 日下线，不再提供服务。请使用 Vercel 或其他替代方案。

### Q: Vercel 需要付费吗？
A: 个人项目完全免费，有充足的免费额度。

### Q: 本地使用时 CDN 资源加载失败怎么办？
A: 可以：
1. 使用代理访问一次，让浏览器缓存资源
2. 下载库文件到本地（方案二选项 C）
3. 使用离线版本

---

**最后更新**：2024年

